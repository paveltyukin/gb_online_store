var t=Object.defineProperty,e=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(e,r,a)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,i=(t,e)=>{for(var r in e||(e={}))c.call(e,r)&&o(t,r,e[r]);if(a)for(var r of a(e))s.call(e,r)&&o(t,r,e[r]);return t},n=(t,a)=>e(t,r(a));import{r as d,c as u,o as l,a as p,b as m,d as P,e as y,u as C,f,w as T,g as _,h as g,i as v,t as b,j as A,k as h,l as R,m as U,n as I,p as O,v as G,q as D,F as q,s as E,x as S,y as w,z as k,A as L,B as F}from"./vendor.44f08532.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const r of t)if("childList"===r.type)for(const t of r.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var N=(t,e)=>{for(const[r,a]of e)t[r]=a;return t};var j,$,Q,B,H,x,z=N({},[["render",function(t,e){const r=d("router-view");return l(),u(r)}]]);($=j||(j={})).GetProducts="PRODUCT/GETTER_PRODUCT",$.GetFilteredProducts="PRODUCT/GETTER_FILTERED_PRODUCT",(B=Q||(Q={})).UpdateAllProducts="PRODUCT/UPDATE_ALL_PRODUCTS",B.UpdateFilteredProducts="PRODUCT/UPDATE_FILTERED_PRODUCTS",(x=H||(H={})).GetAllProducts="PRODUCT/GET_ALL_PRODUCTS",x.GetFilteredProducts="PRODUCT/GET_FILTERED_PRODUCTS",x.GetProduct="PRODUCT/GET_PRODUCT";const K={[j.GetProducts]:t=>t.products.filtered,[j.GetFilteredProducts]:t=>t.products.filtered},M="http://localhost:3001",V="https://via.placeholder.com/200x150",J=p.create({withCredentials:!0,baseURL:M}),W={async[H.GetAllProducts]({commit:t}){const e=await J.post(`${M}/products`);t(Q.UpdateAllProducts,e.data),t(Q.UpdateFilteredProducts,e.data)},async[H.GetFilteredProducts]({commit:t},e){const r=await J.post(`${M}/filter_products`,{filter:e});t(Q.UpdateFilteredProducts,r.data)},[H.GetProduct]:async({commit:t},e)=>(await J.post(`${M}/product`,{id:e})).data},X={state:{products:{all:[],filtered:[]}},getters:K,mutations:{[Q.UpdateAllProducts](t,e){t.products.all=e},[Q.UpdateFilteredProducts](t,e){t.products.filtered=e}},actions:W};var Y,Z,tt,et,rt;(Z=Y||(Y={})).CartInfo="CART/INFO",Z.GetProductsInCart="CART/GET_PRODUCTS_IN_CART",(tt||(tt={})).UpdateAllCarts="CART/UPDATE_ALL_PRODUCTS",(rt=et||(et={})).SetQuantityProductsInCart="CART/SET_PRODUCTS_IN_CART",rt.AddProductToCart="CART/ADD_PRODUCT_TO_CART",rt.GetAllProductsInCart="CART/GET_ALL_PRODUCTS_IN_CART";const at={[Y.CartInfo]:t=>t,[Y.GetProductsInCart]:t=>t.cartItems},ct={async[et.SetQuantityProductsInCart]({commit:t},e){const r=await J.post(`${M}/cart`,e);t(tt.UpdateAllCarts,r.data)},async[et.AddProductToCart]({commit:t},e){await J.post(`${M}/add_to_cart`,e)},async[et.GetAllProductsInCart]({commit:t}){const e=await J.post(`${M}/get_cart`);t(tt.UpdateAllCarts,e.data)}},st={state:{cartItems:[]},getters:at,mutations:{[tt.UpdateAllCarts](t,e){t.cartItems=e}},actions:ct},ot=m({plugins:[P()],modules:{product:X,cart:st}}),it={class:"cart-item","data-id":""},nt={class:"product-bio"},dt=["src"],ut={class:"product-desc"},lt={class:"product-title"},pt={class:"product-quantity"},mt={class:"product-single-price"},Pt={class:"right-block"},yt={class:"product-price"},Ct=y({name:"CartItemByProduct"});const ft=y(n(i({},Ct),{props:{product_id:{type:Number,required:!0},title:{type:String,required:!0},price:{type:Number,required:!0},quantity:{type:Number,required:!0}},setup:function(t){const e=t,r=C(),a=f({product_id:e.product_id,title:e.title,price:e.price,quantity:e.quantity});return T(e,((t,e)=>{a.quantity=e.quantity})),(t,e)=>(l(),_("div",it,[g("div",nt,[g("img",{src:v(V),alt:"Some image"},null,8,dt),g("div",ut,[g("p",lt,b(v(a).title),1),g("p",pt,"Количество: "+b(v(a).quantity),1),g("p",mt,b(v(a).price)+" за ед.",1)])]),g("div",Pt,[g("p",yt,b(v(a).quantity*v(a).price)+" ₽",1),g("button",{class:"del-btn",onClick:e[0]||(e[0]=t=>{return e=v(a).product_id,void r.dispatch(et.SetQuantityProductsInCart,{id:e,quantity:-1});var e})},"×")])]))}})),Tt={class:"logo"},_t=S("Интернет-магазин"),gt={class:"cart"},vt={action:"#",class:"search-form"},bt=["onClick"],At=[g("i",{class:"fas fa-search"},null,-1)],ht=g("button",{class:"btn-cart",type:"button"},"Корзина",-1),Rt=S("Перейти в корзину"),Ut=y({name:"Cart",components:{CartItemByProduct:ft}});const It=y(n(i({},Ut),{setup:function(t){const e=C(),r=A("");let a=h((()=>e.getters[Y.GetProductsInCart]));R((async()=>{await e.dispatch(et.GetAllProductsInCart)}));const c=()=>{e.dispatch(H.GetFilteredProducts,r.value)};return(t,e)=>{const s=d("router-link");return l(),_("header",null,[g("div",Tt,[U(s,{to:{name:"HomePage"}},{default:I((()=>[_t])),_:1})]),g("div",gt,[g("form",vt,[O(g("input",{type:"text",class:"search-field","onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t)},null,512),[[G,r.value]]),g("button",{class:"btn-search",type:"submit",onClick:D(c,["prevent"])},At,8,bt)]),ht,U(s,{to:{name:"CartPage"}},{default:I((()=>[Rt])),_:1}),(l(!0),_(q,null,E(v(a),(t=>(l(),_("div",{class:"product-item",key:t.product_id},[U(ft,{product_id:t.product_id,title:t.title,price:t.price,quantity:t.quantity},null,8,["product_id","title","price","quantity"])])))),128))])])}}})),Ot=["src"],Gt={class:"desc"},Dt=y({name:"ProductItem"});const qt=y(n(i({},Dt),{props:{id:{type:Number,required:!0},title:{type:String,required:!0},price:{type:Number,required:!0}},setup:function(t){const e=t,r=C(),a=f({id:e.id,title:e.title,price:e.price});return(t,e)=>{const c=d("router-link");return l(),_(q,null,[g("img",{src:v(V),alt:"Some img"},null,8,Ot),g("div",Gt,[g("h3",null,[U(c,{to:{name:"ProductPage",params:{id:v(a).id}}},{default:I((()=>[S(b(v(a).title),1)])),_:1},8,["to"])]),g("p",null,b(v(a).price)+"₽",1),g("button",{class:"buy-btn",onClick:e[0]||(e[0]=t=>{return e=v(a).id,void r.dispatch(et.SetQuantityProductsInCart,{id:e,quantity:1});var e})},"Купить")])],64)}}})),Et={key:0,class:"products"},St={key:1,class:"goods-list"},wt=y({name:"Product",components:{ProductItem:qt}});const kt=y(n(i({},wt),{setup:function(t){const e=C(),r=h((()=>e.getters[j.GetFilteredProducts]));return R((async()=>{await e.dispatch(H.GetAllProducts)})),(t,e)=>(l(),_("main",null,[v(r).length>0?(l(),_("div",Et,[(l(!0),_(q,null,E(v(r),(t=>(l(),_("div",{class:"product-item",key:t.id},[U(qt,{id:t.id,title:t.title,price:t.price},null,8,["id","title","price"])])))),128))])):(l(),_("div",St," Нет данных "))]))}}));var Lt=N(y({name:"HomePage",components:{Cart:It,Products:kt}}),[["render",function(t,e,r,a,c,s){const o=d("Cart"),i=d("Products");return l(),_(q,null,[U(o),U(i)],64)}]]);const Ft=g("h1",null,"Карточка товара",-1),Nt=["src"],jt={class:"desc"},$t=y({name:"ProductPage",components:{Cart:It}});const Qt=y(n(i({},$t),{setup:function(t){const e=w(),r=C();let a=f({id:0,title:"",price:0});return R((async()=>{const t=await r.dispatch(H.GetProduct,e.params.id);a.price=t.price,a.title=t.title,a.id=t.id})),(t,e)=>(l(),_(q,null,[U(It),Ft,g("div",null,[g("img",{src:v(V),alt:"Some img"},null,8,Nt),g("div",jt,[g("h3",null,b(v(a).title),1),g("p",null,b(v(a).price)+"₽",1),g("button",{class:"buy-btn",onClick:e[0]||(e[0]=t=>{return e=v(a).id,void r.dispatch(et.SetQuantityProductsInCart,{id:e,quantity:1});var e})},"Купить")])])],64))}})),Bt={class:"logo"},Ht=S("Интернет-магазин"),xt=g("h1",null,"Карточка корзины",-1),zt=y({name:"CartPage",components:{CartItemByProduct:ft}});const Kt=[{path:"/",name:"HomePage",component:Lt},{path:"/product/:id",name:"ProductPage",component:Qt},{path:"/cart",name:"CartPage",component:y(n(i({},zt),{setup:function(t){const e=C();A("");let r=h((()=>e.getters[Y.GetProductsInCart]));return R((async()=>{await e.dispatch(et.GetAllProductsInCart)})),(t,e)=>{const a=d("router-link");return l(),_(q,null,[g("header",null,[g("div",Bt,[U(a,{to:{name:"HomePage"}},{default:I((()=>[Ht])),_:1})])]),xt,(l(!0),_(q,null,E(v(r),(t=>(l(),_("div",{class:"product-item",key:t.product_id},[U(ft,{product_id:t.product_id,title:t.title,price:t.price,quantity:t.quantity},null,8,["product_id","title","price","quantity"])])))),128))],64)}}}))}],Mt=k({history:L(),routes:Kt}),Vt=F(z);Vt.use(Mt),Vt.use(ot),Vt.mount("#app");
